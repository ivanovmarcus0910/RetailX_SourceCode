@model BusinessObject.Models.Product
@{
    Layout = null;
}

<p>Are you sure you want to delete <strong>@Model.ProductName</strong>?</p>

<form id="deleteProductForm" method="post" action="@Url.Action("DeleteConfirmed","Products")">
    @Html.AntiForgeryToken()
    <input type="hidden" name="id" value="@Model.ProductId" />
    <div class="text-end">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-danger">Delete</button>
    </div>
</form>

@section Scripts {
<script>
$(document).on("submit", "#deleteProductForm", function(e){
    e.preventDefault();
    var form = $(this);
    $.ajax({
        type: "POST",
        url: form.attr("action"),
        data: form.serialize(),
        success: function(response){
            if(response.success){
                $('#deleteModal').modal('hide');
                location.reload();
            } else {
                alert("Delete failed!");
            }
        },
        error: function(){
            alert("Error during delete request!");
        }
    });
});
</script>
}
