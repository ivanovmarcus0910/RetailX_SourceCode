@model BusinessObject.Models.Customer
@{
    Layout = "_SellerLayout";
}

<h2>Sửa thông tin khách hàng</h2>

<form asp-action="Edit" method="post" class="mt-3">
    <input type="hidden" asp-for="CustomerId" />

    <!-- ========================= -->
    <!-- NAME -->
    <!-- ========================= -->
    <div class="mb-3">
        <label class="form-label">Tên khách hàng</label>
        <input asp-for="CustomerName" class="form-control" required />
    </div>

    <!-- ========================= -->
    <!-- PHONE -->
    <!-- ========================= -->
    <div class="mb-3">
        <label class="form-label">Số điện thoại</label>
        <input asp-for="Phone" class="form-control" required />

        @if (ViewBag.PhoneDuplicate != null)
        {
            var dup = ViewBag.PhoneDuplicate;

            if (dup.IsActive)
            {
                <div class="text-danger mt-1">
                    Số điện thoại đã được sử dụng bởi khách hàng:
                    <strong>@dup.CustomerName</strong> (ID: @dup.CustomerId).
                </div>
            }
            else
            {
                <div class="alert alert-warning mt-2">
                    Số điện thoại này thuộc khách hàng
                    <strong>@dup.CustomerName</strong> (ID: @dup.CustomerId)
                    nhưng đang <b>bị vô hiệu hóa</b>.
                    <br />
                    <a asp-controller="Customer"
                       asp-action="Profile"
                       asp-route-id="@dup.CustomerId"
                       class="btn btn-warning btn-sm mt-2">
                        🔄 Xem hồ sơ để khôi phục
                    </a>
                </div>
            }
        }
    </div>

    <!-- ========================= -->
    <!-- EMAIL -->
    <!-- ========================= -->
    <div class="mb-3">
        <label class="form-label">Email</label>
        <input asp-for="Email" class="form-control" />

        @if (ViewBag.EmailDuplicate != null)
        {
            var dup = ViewBag.EmailDuplicate;

            if (dup.IsActive)
            {
                <div class="text-danger mt-1">
                    Email đã được sử dụng bởi khách hàng:
                    <strong>@dup.CustomerName</strong> (ID: @dup.CustomerId).
                </div>
            }
            else
            {
                <div class="alert alert-warning mt-2">
                    Email này thuộc khách hàng
                    <strong>@dup.CustomerName</strong> (ID: @dup.CustomerId)
                    nhưng đang <b>bị vô hiệu hóa</b>.
                    <br />
                    <a asp-controller="Customer"
                       asp-action="Profile"
                       asp-route-id="@dup.CustomerId"
                       class="btn btn-warning btn-sm mt-2">
                        🔄 Xem hồ sơ để khôi phục
                    </a>
                </div>
            }
        }
    </div>

    <!-- ========================= -->
    <!-- ADDRESS -->
    <!-- ========================= -->
    <div class="mb-3">
        <label class="form-label">Địa chỉ</label>
        <input asp-for="Address" class="form-control" />
    </div>

    <button class="btn btn-primary">Lưu thay đổi</button>
    <a asp-action="Index" class="btn btn-secondary ms-2">Quay lại</a>
</form>
