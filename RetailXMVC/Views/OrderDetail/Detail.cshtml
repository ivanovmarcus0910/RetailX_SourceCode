@model BusinessObject.Models.Order

<h2>Chi tiết hóa đơn #@Model.OrderId</h2>

<p><strong>Khách hàng:</strong> @Model.Customer.CustomerName</p>
<p><strong>Nhân viên:</strong> @Model.Staff.StaffName</p>
<p><strong>Ngày tạo:</strong> @Model.CreateDate</p>

<h3>Sản phẩm trong đơn</h3>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Sản phẩm</th>
            <th>Số lượng</th>
            <th>Giá</th>
            <th>Tổng</th>
            <th>Thao tác</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var d in Model.OrderDetails)
        {
            <tr>
                <td>@d.Product.ProductName</td>
                <td>@d.Quantity</td>
                <td>@d.Product.Price</td>
                <td>@(d.Quantity* d.Product.Price)</td>

                <td>
                    <a asp-controller="OrderDetail"
                       asp-action="Edit"
                       asp-route-id="@d.OrderDetailId"
                       class="btn btn-warning btn-sm">
                        Sửa
                    </a>

                    <a asp-controller="OrderDetail"
                       asp-action="Delete"
                       asp-route-id="@d.OrderDetailId"
                       class="btn btn-danger btn-sm"
                       onclick="return confirm('Xóa sản phẩm này khỏi hóa đơn?');">
                        Xóa
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="mt-3">
    <a asp-controller="OrderDetail"
       asp-action="Create"
       asp-route-orderId="@Model.OrderId"
       class="btn btn-success">
        ➕ Thêm sản phẩm
    </a>

    <a asp-controller="Orders"
       asp-action="Create"
       class="btn btn-secondary">
        Quay lại
    </a>
</div>
